# Лабораторная №3
Использование виртуальной памяти
1. Ознакомиться со структурой виртуальной памяти и инструментами для работы с ней.
2. Разработать программу memory-user.c, которая принимает на вход количество Mb памяти, которую она резервирует и в которой она размещает массив,  а затем перебирает все его элементы в бесконечном цикле или заданное количество времени, которое также вводится по запросу.
3. Пока программа memory-user.c выполнется при различных объемах запрошенной памяти (включая значительные), из другого терминала выполнить запрос free(). Проанализировать результаты распределени памяти до и после завершения memory-user.c с помощью kill.
4. Исследовать распределение памяти для memory-user.c с использованием pmap при различных объемах запрошенной памяти (включая значительные).

### №1
**Виртуальная память** — метод управления памятью компьютера, позволяющий выполнять программы, 
требующие больше оперативной памяти, чем имеется в компьютере, 
путём автоматического перемещения частей программы между основной памятью и вторичным хранилищем
(например, жёстким диском). \
Реализация метода работы с виртуальной памятью 
требует как аппаратной поддержки, так и поддержки со стороны операционной системы. \
\
Linux поддерживает **виртуальную память**, 
то есть использует диск как расширение оперативной памяти так, 
чтобы эффективный размер пригодной для использования памяти был больше размера памяти, 
реально установленной в системе. 
Ядро пишет содержимое блока памяти, неиспользуемого в настоящее время на жесткий диск так, 
чтобы память могла использоваться для другой цели. 
Когда первоначальное содержание понадобится снова, оно будет считано обратно в память.\
Этот механизм сделано полностью прозрачным для пользователя; 
программы, запущенные под Linux, видят только большой доступный объем памяти, 
и не обращают внимания на то, что их части время от времени оказываются на диске. 
Конечно, чтение и запись жесткого диска медленнее, чем использование реальной памяти, 
так что программы не выполняются как быстро.
Часть жесткого диска, который используется как виртуальная память, называется **свопом**.\
**Методы работы с виртуальной памятью:**
* **malloc**: Выделяет заданной число байт и возвращает
указатель на них. Если памяти недостаточно, возвращает указатель
на NULL (null pointer)

* **free**: Принимает на вход указатель на область в памяти, выделенной с помощью malloc и 
возвращает её для дальнейшего использования в программе или
операционной систем.

* **brk**: System break - крайняя граница размеченной для процесса памяти.
brk() перемещает эту границу вперед/назад, чтобы уменьшить или увеличить объем
выделенной памяти.

* **mmap**: Может разметить память в любом месте адресного пространства,
а не только в конце процесса. Также может не просто разметить 
виртуальную память как проекцию к физической или свопу, он может
привязать память к конкретным файлам так, что чтение и запись
будут оперировать непосредственно с файлом.

* **mpstat**: Использование процессоров в системе. Команда показывает развернутую
статистику или все процессов системы `mpstat -P ALL`, или каждого по отдельности 
(mpstat -P 0), 0 - первый процессор.

* **pmap**: Использование памяти процессами. Команда детально раписывает использование
операивной памяти процессами в системе. `pmap -d PID`

### №2
**[memory-user.c]()**