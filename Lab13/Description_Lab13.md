# Лабораторная №13

Разработать план  (что, зачем и как тестируется)  
для трех вариантов кода и прокомментировать результаты тестирования для:

**№1.** *queue. c  - наивный вариант*

**№2.** *queue_mutex. c  - с использованием mutex*

**№3.** *queue_cond. c  - с использованием условных переменных для ситуаций с пустой и полной очередями*

В наивной реализации существует несколько проблем.
1.) Разные потоки могут могут обращаться к полям next_in, next_out и array одновременно.
Это означает, что этот код не thread-safety. 
Поэтому может возникнуть ситуация, когда запись в одну и ту же ячейку происходит дважды из разных потоков.
2.) При удалении элемента из пустой очереди программа завершается с ошибкой. 
3.) Прит добавлении элемента в полную очередь программа также завершается с ошибкой.
Корректная программа должна ожидать, когда появится элемент или же наоборот освободится место, 
чтобы вставить новый.

Для тестирования создадим 3 теста.

1 тест - проверка на thread-safety. Несколько потоков делают вставки в очередь до тех пор, 
пок очередь не заполнится. После проверяем, есть ли пустые места в очереди.

2 тест - проверяем удаление из пустой очереди. Один поток вызывает pop. 
Другой поток ожидает некоторое время и добавляет элемент в очередь, чтоюы предыдущий поток смог сделать удаление.

3 тест - првоеряем на полноту очереди. Один поток делает вставку в полную очередь,
другое поток спустя некоторые промежуток времени удаляет элемент из очереди, 
тем самым освобождая место для элемента из ожидающего потока.

Таблица с результатами тестирования:
 
 | |```queue.c```| ```queue_mutex.c``` | ```queue_cond.c``` |
 |---| --------------- | --------------- | --------------- |
 |тест "Thread safety"| ❌ | ✔ | ✔ |
 |тест "Удаление из пустой очереди"| ❌ | ❌ | ✔ |
 |тест "Вставка в полную очередь"| ❌ | ❌ | ✔ |
 
